<div x-data="{ open: false }" class="mobile-only-wrapper">
  <button class="mobile-only-toggle" @click="open = !open" :aria-expanded="open.toString()" aria-controls="mobile-only-nav" aria-label="Menu">
    <span class="hamburger-line" :class="{ 'active': open }"></span>
    <span class="hamburger-line" :class="{ 'active': open }"></span>
    <span class="hamburger-line" :class="{ 'active': open }"></span>
  </button>
  <div id="mobile-only-nav" class="mobile-only-nav" x-show="open" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 max-h-0" x-transition:enter-end="opacity-100 max-h-menu" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 max-h-menu" x-transition:leave-end="opacity-0 max-h-0" style="display: none; overflow: hidden;">
    <ul class="mobile-only-menu">
      {% for item in navigation %}
        {% if not item.parent_id %}
          {% set children = navigation|selectattr('parent_id', 'equalto', item.id)|list %}
          <li class="mobile-only-item" x-data="{ openSub: false }">
            {% if children %}
            <button class="mobile-only-link" @click="openSub = !openSub" :aria-expanded="openSub.toString()">
              <span class="nav-chinese">{{ item.name }}</span>
              <svg class="toggle-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" :class="{ 'rotate-180': openSub }"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
            <ul class="mobile-only-sub" x-show="openSub" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 max-h-0" x-transition:enter-end="opacity-100 max-h-96" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 max-h-96" x-transition:leave-end="opacity-0 max-h-0" style="display: none; overflow: hidden;">
              {% for c in children %}
              <li><a href="/{{ c.slug }}/" class="mobile-only-sub-link">{{ c.name }}</a></li>
              {% endfor %}
            </ul>
            {% else %}
            <a href="/{{ item.slug }}/" class="mobile-only-link"><span class="nav-chinese">{{ item.name }}</span></a>
            {% endif %}
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
</div>