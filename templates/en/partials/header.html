<header class="site-header" role="banner">
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-left">
                {% if site.phone %}
                <span class="top-bar-item">
                    <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                    <a href="tel:{{ site.phone }}">{{ site.phone }}</a>
                </span>
                {% endif %}
                {% if site.email %}
                <span class="top-bar-item">
                    <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    <a href="mailto:{{ site.email }}">{{ site.email }}</a>
                </span>
                {% endif %}
            </div>
            <div class="top-bar-right">
                <div class="social-links">
                    {% if site.facebook_url %}
                    <a href="{{ site.facebook_url }}" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
                        <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg>
                    </a>
                    {% endif %}
                    {% if site.instagram_url %}
                    <a href="{{ site.instagram_url }}" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                        <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg>
                    </a>
                    {% endif %}
                </div>
                <div class="language-switcher">
                    <a href="{{ request.url.path|replace('/en', '') }}" class="language-toggle" aria-label="Switch to Chinese">
                        <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="2" y1="12" x2="22" y2="12"></line>
                            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                        </svg>
                        <span>中文</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <div class="main-header">
        <div class="container">
            <div class="header-content">
                <!-- Logo -->
                <div class="header-logo">
                    <a href="/en/" aria-label="Bowen Education Group Home">
                        <img src="/static/images/logo.png" alt="Bowen Education Group" height="60">
                        <span class="logo-text">
                            <strong>{{ site.site_name }}</strong>
                        </span>
                    </a>
                </div>

                {% include 'components/navigation.html' %}
                {% include 'components/navigation_mobile.html' %}
            </div>
        </div>
    </div>

    <!-- Search Overlay -->
    <div class="search-overlay" id="search-overlay" hidden>
        <div class="search-overlay-content">
            <button class="search-close" aria-label="Close search" data-action="close-search">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <form action="/search/" method="GET" class="search-form">
                <input type="search" name="q" placeholder="搜索课程、新闻、活动..." aria-label="搜索" autofocus>
                <button type="submit" class="btn btn-primary">搜索</button>
            </form>
        </div>
    </div>

</header>

<script>
// Header functionality
(function() {
    // Search toggle
    const searchToggles = document.querySelectorAll('[data-action="toggle-search"]');
    const searchOverlay = document.getElementById('search-overlay');
    const searchClose = document.querySelector('[data-action="close-search"]');

    searchToggles.forEach(toggle => {
        toggle.addEventListener('click', () => {
            searchOverlay.hidden = false;
            searchOverlay.querySelector('input[type="search"]').focus();
        });
    });

    if (searchClose) {
        searchClose.addEventListener('click', () => {
            searchOverlay.hidden = true;
        });
    }

    // Language switcher
    const languageToggle = document.querySelector('.language-toggle');
    const languageDropdown = document.querySelector('.language-dropdown');

    if (languageToggle && languageDropdown) {
        languageToggle.addEventListener('click', () => {
            languageDropdown.hidden = !languageDropdown.hidden;
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.language-switcher')) {
                languageDropdown.hidden = true;
            }
        });
    }
})();
</script>
