{% extends "base.html" %}

{% block title %}{{ column.name }} - Bowen Education Group{% endblock %}

{% block content %}

<!-- Hero Section -->
{% set hero_title = column.name %}
{% set hero_subtitle = column.description %}
{% include 'components/hero_standard.html' %}

<!-- Posts List Section -->
<section class="section section--news-list">
    <div class="container">
        <!-- Filter/Category Bar (optional, if categories exist) -->
        {% if categories %}
        <div class="news-filters" data-aos="fade-up">
            <div class="news-filters__inner">
                <a href="/en/{{ column.slug }}" class="news-filter {% if not current_category_id %}news-filter--active{% endif %}">
                    All Articles
                </a>
                {% for category in categories %}
                <a href="/en/{{ column.slug }}?category={{ category.id }}" class="news-filter {% if current_category_id == category.id %}news-filter--active{% endif %}">
                    {{ category.name }}
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- Posts Grid -->
        <div class="row news-grid">
            {% if posts %}
                {% for post in posts %}
                <div class="col-md-6 col-lg-4 mb-4" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
                    <article class="news-card">
                        <!-- Thumbnail -->
                        <a href="/en/{{ column.slug }}/{{ post.slug }}" class="news-card__image">
                            {% if post.cover_media %}
                            <img src="{{ post.cover_media.file_url or post.cover_media.path_original }}" alt="{{ post.title }}">
                            {% else %}
                            <img src="/static/images/news/default-news.jpg" alt="{{ post.title }}">
                            {% endif %}
                            <div class="news-card__overlay">
                                <span class="news-card__read-more">View Details â†’</span>
                            </div>
                        </a>

                        <!-- Content -->
                        <div class="news-card__content">
                            <!-- Date and Category -->
                            <div class="news-card__meta">
                                <time class="news-card__date">
                                    <i class="icon-calendar"></i>
                                    {{ post.published_at.strftime('%Y-%m-%d') if post.published_at else post.created_at.strftime('%Y-%m-%d') }}
                                </time>
                                {% if post.categories %}
                                <span class="news-card__category">
                                    {{ post.categories[0].name }}
                                </span>
                                {% endif %}
                            </div>

                            <!-- Title -->
                            <h3 class="news-card__title">
                                <a href="/en/{{ column.slug }}/{{ post.slug }}">{{ post.title }}</a>
                            </h3>

                            <!-- Summary -->
                            <p class="news-card__summary">
                                {{ post.summary or (post.content_html|striptags|truncate(120)) }}
                            </p>

                            <!-- Read More Link -->
                            <a href="/en/{{ column.slug }}/{{ post.slug }}" class="news-card__link">
                                Read More <i class="icon-arrow-right"></i>
                            </a>
                        </div>
                    </article>
                </div>
                {% endfor %}
            {% else %}
                <div class="col-12">
                    <div class="news-empty" data-aos="fade-up">
                        <div class="news-empty__icon">ðŸ“°</div>
                        <h3 class="news-empty__title">No Articles</h3>
                        <p class="news-empty__text">Content is being updated. Please check back soon.</p>
                        <a href="/en/" class="btn btn--primary">Back to Home</a>
                    </div>
                </div>
            {% endif %}
        </div>

        <!-- Pagination (if needed) -->
        {% if total > 12 %}
        <div class="pagination" data-aos="fade-up">
            <!-- Add pagination logic here -->
        </div>
        {% endif %}
    </div>
</section>

<!-- Call to Action Section -->
<section class="section section--cta" style="background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);">
    <div class="container">
        <div class="cta-box text-center" data-aos="fade-up">
            <h2 class="cta-box__title">Learn More About Bowen Education Group</h2>
            <p class="cta-box__text">
                Interested in our courses, activities or partnership opportunities? Feel free to contact us anytime.
            </p>
            <div class="cta-box__buttons">
                <a href="/en/contact" class="btn btn--white">Contact Us</a>
                <a href="/en/about" class="btn btn--outline-white">About Us</a>
            </div>
        </div>
    </div>
</section>

<style>
/* News List Page Styles */
.section--news-list {
    padding: 4rem 0;
}

/* Filters */
.news-filters {
    margin-bottom: 3rem;
    text-align: center;
}

.news-filters__inner {
    display: inline-flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 50px;
}

.news-filter {
    padding: 0.5rem 1.5rem;
    background: #fff;
    color: #495057;
    text-decoration: none;
    border-radius: 50px;
    transition: all 0.3s;
    font-size: 0.95rem;
}

.news-filter:hover {
    background: #1e3a8a;
    color: #fff;
    transform: translateY(-2px);
}

.news-filter--active {
    background: #1e3a8a;
    color: #fff;
}

/* News Grid */
.news-grid {
    margin-top: 2rem;
}

/* News Card */
.news-card {
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    transition: all 0.3s;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.news-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.news-card__image {
    position: relative;
    width: 100%;
    height: 220px;
    overflow: hidden;
    display: block;
}

.news-card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
}

.news-card:hover .news-card__image img {
    transform: scale(1.1);
}

.news-card__overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(30, 58, 138, 0);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.news-card:hover .news-card__overlay {
    background: rgba(30, 58, 138, 0.8);
}

.news-card__read-more {
    color: #fff;
    font-weight: 600;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s;
}

.news-card:hover .news-card__read-more {
    opacity: 1;
    transform: translateY(0);
}

.news-card__content {
    padding: 1.5rem;
    flex: 1;
    display: flex;
    flex-direction: column;
}

.news-card__meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1rem;
    font-size: 0.85rem;
}

.news-card__date {
    color: #6c757d;
    display: flex;
    align-items: center;
    gap: 0.3rem;
}

.news-card__category {
    padding: 0.25rem 0.75rem;
    background: #e3f2fd;
    color: #1e3a8a;
    border-radius: 12px;
    font-size: 0.8rem;
}

.news-card__title {
    font-size: 1.2rem;
    margin-bottom: 0.75rem;
    line-height: 1.4;
}

.news-card__title a {
    color: #1f2937;
    text-decoration: none;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.news-card__title a:hover {
    color: #1e3a8a;
}

.news-card__summary {
    color: #6c757d;
    font-size: 0.95rem;
    line-height: 1.6;
    margin-bottom: 1rem;
    flex: 1;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.news-card__link {
    color: #1e3a8a;
    text-decoration: none;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: gap 0.3s;
}

.news-card__link:hover {
    gap: 0.75rem;
}

/* Empty State */
.news-empty {
    text-align: center;
    padding: 4rem 2rem;
    background: #f8f9fa;
    border-radius: 12px;
}

.news-empty__icon {
    font-size: 4rem;
    margin-bottom: 1rem;
}

.news-empty__title {
    font-size: 1.5rem;
    color: #1f2937;
    margin-bottom: 0.5rem;
}

.news-empty__text {
    color: #6c757d;
    margin-bottom: 2rem;
}

/* CTA Section */
.section--cta {
    padding: 4rem 0;
    color: #fff;
}

.cta-box__title {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: #fff;
}

.cta-box__text {
    font-size: 1.1rem;
    margin-bottom: 2rem;
    color: rgba(255, 255, 255, 0.9);
}

.cta-box__buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
}

.btn--white {
    background: #fff;
    color: #1e3a8a;
}

.btn--white:hover {
    background: #f8f9fa;
}

.btn--outline-white {
    background: transparent;
    color: #fff;
    border: 2px solid #fff;
}

.btn--outline-white:hover {
    background: #fff;
    color: #1e3a8a;
}

/* Responsive */
@media (max-width: 767px) {
    .news-filters__inner {
        flex-direction: column;
        align-items: stretch;
        padding: 0.5rem;
    }

    .news-filter {
        text-align: center;
    }

    .news-card__image {
        height: 200px;
    }

    .cta-box__title {
        font-size: 1.5rem;
    }

    .cta-box__buttons {
        flex-direction: column;
    }

    .cta-box__buttons .btn {
        width: 100%;
    }
}
</style>

{% endblock %}
