{% extends 'base.html' %}
{% block content %}
<div class="container-fluid p-0">
  {{ layout_html | safe }}
</div>
{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<style>
/* Custom Badge Styles */
.badge-custom { background-color: var(--color-primary) !important; color: white !important; padding: 0.5rem 1rem; font-weight: 500; border-radius: 0.375rem; font-size: 0.875rem; letter-spacing: 0.025em; text-transform: uppercase; }

/* Hero Carousel */
.hero-carousel { position: relative; height: 100vh; overflow: hidden; }
.swiper { width: 100%; height: 100%; }
.hero-slide { position: relative; height: 100vh; background-size: cover; background-position: center; display: flex; align-items: center; }
.hero-slide::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(0, 20, 0, 0.3) 0%, rgba(0, 30, 60, 0.7) 100%); z-index: 1; }
.hero-slide-content { position: relative; z-index: 2; color: white; max-width: 900px; background: rgba(0, 0, 0, 0.2); padding: 3rem; border-radius: 12px; backdrop-filter: blur(2px); }
.hero-slide-title { font-size: 3.5rem; font-weight: 700; margin-bottom: 1rem; line-height: 1.2; color: #ffffff; text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.9); }
.hero-slide-subtitle { font-size: 1.5rem; margin-bottom: 0.5rem; color: #ffffff; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); }
.hero-slide-desc { font-size: 1.125rem; margin-bottom: 2rem; color: #ffffff; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); }
.hero-badge { position: absolute; top: 2rem; right: 2rem; background: white; padding: 0.5rem 1rem; border-radius: 8px; z-index: 3; }
.hero-badge img { height: 40px; }
.swiper-button-next, .swiper-button-prev { color: white; }
.swiper-pagination-bullet { background: white; opacity: 0.5; }
.swiper-pagination-bullet-active { opacity: 1; }

/* Quick Entry */
.quick-entry-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1.5rem; margin-top: 2rem; }
.quick-entry-card { background: white; border-radius: 16px; padding: 2rem; display: flex; align-items: flex-start; gap: 1.5rem; text-decoration: none; color: inherit; border: 1px solid #e5e7eb; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; }
.quick-entry-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #1e3a8a, #3b82f6); transform: scaleX(0); transition: transform 0.3s ease; }
.quick-entry-card:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12); border-color: #3b82f6; }
.quick-entry-card:hover::before { transform: scaleX(1); }
.quick-entry-icon { flex-shrink: 0; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; }
.quick-entry-icon-bg { width: 100%; height: 100%; border-radius: 12px; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; transition: all 0.3s ease; }
.quick-entry-card:hover .quick-entry-icon-bg { background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); transform: scale(1.1); }
.quick-entry-content { flex: 1; min-width: 0; }
.quick-entry-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.25rem; color: #1f2937; }
.quick-entry-subtitle { font-size: 0.875rem; color: #6b7280; margin-bottom: 0.75rem; font-weight: 500; }
.quick-entry-desc { font-size: 0.9375rem; color: #6b7280; margin-bottom: 1rem; line-height: 1.5; }
.quick-entry-features { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.quick-entry-tag { background: #f3f4f6; color: #374151; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 500; transition: all 0.3s ease; }
.quick-entry-card:hover .quick-entry-tag { background: #dbeafe; color: #1e40af; }
.quick-entry-arrow { flex-shrink: 0; color: #9ca3af; transition: all 0.3s ease; align-self: center; }
.quick-entry-card:hover .quick-entry-arrow { color: #3b82f6; transform: translateX(4px); }

/* Service Blocks */
.service-blocks { display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; margin-top: 3rem; }
.service-block { position: relative; height: 350px; border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; }
.service-block:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2); }
.service-block-bg { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-size: cover; background-position: center; transition: transform 0.3s ease; }
.service-block:hover .service-block-bg { transform: scale(1.1); }
.service-block::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.7)); z-index: 1; }
.service-block-content { position: relative; z-index: 2; padding: 2rem; height: 100%; display: flex; flex-direction: column; justify-content: flex-end; color: white; }
.service-block-icon { font-size: 3rem; margin-bottom: 1rem; color: #ffffff; text-shadow: 1px 1px 2px rgba(0,0,0,0.6); }
.service-block-title { font-size: 1.75rem; font-weight: 700; margin-bottom: 0.5rem; color: #ffffff !important; text-shadow: 2px 2px 4px rgba(0,0,0,0.7); }
.service-block-title span { color: #ffffff !important; }
.service-block-desc { font-size: 1rem; margin-bottom: 1rem; opacity: 0.95; color: #ffffff !important; text-shadow: 1px 1px 2px rgba(0,0,0,0.6); }
.service-badge { position: absolute; top: 1rem; right: 1rem; background: #22c55e; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 700; z-index: 3; }

/* News Grid */
.news-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; margin-top: 2rem; }
.news-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; }
.news-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); }
.news-card-image { position: relative; height: 200px; background-size: cover; background-position: center; }
.news-card-category { position: absolute; top: 1rem; left: 1rem; background: #1e3a8a; color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.875rem; }
.news-card-content { padding: 1.5rem; }
.news-card-date { color: #6b7280; font-size: 0.875rem; margin-bottom: 0.5rem; }
.news-card-title { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.news-card-excerpt { color: #6b7280; font-size: 0.9375rem; margin-bottom: 1rem; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

/* Partner Logos */
.partner-logos { display: flex; align-items: center; gap: 3rem; overflow: hidden; padding: 2rem 0; }
.partner-logo { flex-shrink: 0; filter: grayscale(100%); opacity: 0.6; transition: all 0.3s ease; height: 60px; width: auto; }
.partner-logo:hover { filter: grayscale(0%); opacity: 1; transform: scale(1.1); }
.partner-name { flex-shrink: 0; background: #0f172a; color: #ffffff; padding: 0.75rem 1.25rem; border-radius: 999px; font-weight: 700; letter-spacing: 0.02em; box-shadow: 0 8px 16px rgba(0,0,0,0.15); }

/* Stats */
.stats-section { background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); color: white; padding: 4rem 0; }
.stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 3rem; margin-top: 2rem; }
.stat-item { text-align: center; }
.stat-icon { font-size: 3rem; margin-bottom: 1rem; }
.stat-number { font-size: 3rem; font-weight: 700; margin-bottom: 0.5rem; }
.stat-label { font-size: 1rem; opacity: 0.9; }

/* Contact & Map */
.contact-map-section { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; margin-top: 2rem; }

@media (max-width: 991px) {
  .service-blocks { grid-template-columns: 1fr; }
  .news-grid { grid-template-columns: repeat(2, 1fr); }
  .stats-grid { grid-template-columns: repeat(2, 1fr); }
  .contact-map-section { grid-template-columns: 1fr; }
  .hero-slide-title { font-size: 2.5rem; }
  .quick-entry-grid { grid-template-columns: repeat(2, 1fr); gap: 1rem; }
  .quick-entry-card { padding: 1.5rem; }
}
@media (max-width: 767px) {
  .hero-carousel, .hero-slide { height: 70vh; }
  .news-grid { grid-template-columns: 1fr; }
  .hero-slide-title { font-size: 2rem; }
  .hero-slide-subtitle { font-size: 1.25rem; }
  .quick-entry-grid { grid-template-columns: 1fr; gap: 1rem; }
  .quick-entry-card { padding: 1.25rem; flex-direction: column; text-align: center; gap: 1rem; }
  .quick-entry-icon { align-self: center; }
  .quick-entry-arrow { align-self: center; transform: rotate(90deg); }
  .quick-entry-card:hover .quick-entry-arrow { transform: rotate(90deg) translateY(4px); }
}
</style>
{% endblock %}
{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
try{AOS.init({duration:800,once:true,offset:100});}catch(e){}
try{if(document.querySelector('.heroSwiper')){new Swiper('.heroSwiper',{loop:true,autoplay:{delay:6000,disableOnInteraction:false},pagination:{el:'.swiper-pagination',clickable:true},navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev'},effect:'fade',fadeEffect:{crossFade:true}});}}catch(e){}
try{
  const form = document.getElementById('contactForm');
  if(form){
    form.addEventListener('submit', async function(e){
      e.preventDefault();
      if(!this.checkValidity()){ e.stopPropagation(); this.classList.add('was-validated'); return; }
      const data = Object.fromEntries(new FormData(this));
      const btn = this.querySelector('button[type="submit"]'); const text = btn.innerHTML; btn.innerHTML='发送中... Sending...'; btn.disabled=true;
      try{
        const resp = await fetch('/api/contact',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
        if(resp.ok){ alert('感谢您的留言！我们会尽快回复您。'); this.reset(); this.classList.remove('was-validated'); } else { alert('提交失败，请稍后重试或直接致电我们。'); }
      }catch(err){ alert('提交失败，请稍后重试。'); }
      finally{ btn.innerHTML=text; btn.disabled=false; }
    });
  }
}catch(e){}
</script>
{% endblock %}