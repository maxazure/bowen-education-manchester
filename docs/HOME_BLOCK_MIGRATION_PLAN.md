# 首页模板区块化迁移实施方案

## 目标
- 复刻现有首页的所有模块为可配置区块，统一在后台进行拖拽、属性编辑、预览与发布。
- 首页在存在已发布布局时按区块渲染；无布局时回退到原有模板 `templates/home.html`。

## 模块清单
- HeroCarousel：多幻灯片横幅（含徽章、CTA）
- QuickEntryGrid：快捷入口卡片网格
- ServiceBlocksGrid：四大服务模块网格
- NewsGrid：最新新闻与活动栅格（动态）
- PartnerLogos：合作伙伴品牌带
- StatsSection：数据统计带（引用站点设置）
- ContactSection：联系表单与信息、地图占位

## 数据与渲染
- 区块通过注册表定义 Schema 与渲染函数，服务端输出 HTML 片段。
- 动态数据：NewsGrid 使用 `post_service.get_posts`；StatsSection从 `site_service.get_all_site_settings` 读取。
- 静态数据：根据当前模板文案、图片与链接填充到区块属性。

## 后台编辑器
- 在「首页管理」与「栏目页面编辑」中新增上述区块的选择按钮。
- 区块属性以 JSON 编辑框方式保存；后续可升级为表单控件。

## 迁移步骤
1. 新增区块类型与渲染器。
2. 更新编辑器区块库按钮。
3. 编写迁移脚本，读取当前模板内容，生成完整区块草稿布局（不发布）。
4. 预览与校对后可发布上线。

## 验证
- 登录后台后在「首页管理」预览草稿布局，检查各模块内容与样式。
- 发布后访问首页 `/` 验证区块渲染与交互正常。