# æ¨¡å— 09: ç›¸å†Œç®¡ç†

**æ¨¡å—ç¼–å·**: 09
**æ¨¡å—åç§°**: Gallery Management
**ä¼˜å…ˆçº§**: P1
**é¢„è®¡å·¥æ—¶**: 3 å¤©
**è´Ÿè´£ Subagent**: 09_gallery_management
**ä¾èµ–**: æ¨¡å— 02, 03, 04

---

## ğŸ“‹ ä»»åŠ¡æ¦‚è¿°

å®ç°ç›¸å†Œç®¡ç†ç³»ç»Ÿ,åŒ…æ‹¬ç›¸å†Œ CRUDã€æ‰¹é‡ä¸Šä¼ ã€æ‹–æ‹½æ’åºã€å›¾ç‰‡å…ƒæ•°æ®ã€å°é¢å›¾è®¾ç½®ã€æ˜¾ç¤º/éšè—æ§åˆ¶ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

---

## ğŸ¯ ä»»åŠ¡ç›®æ ‡

1. âœ… å®ç°ç›¸å†Œ CRUDåŠŸèƒ½
2. âœ… å®ç°æ‰¹é‡ä¸Šä¼ åŠŸèƒ½
3. âœ… å®ç°æ‹–æ‹½æ’åºåŠŸèƒ½
4. âœ… å®ç°å›¾ç‰‡å…ƒæ•°æ®åŠŸèƒ½
5. âœ… å®ç°å°é¢å›¾è®¾ç½®åŠŸèƒ½
6. âœ… å®ç°æ˜¾ç¤º/éšè—æ§åˆ¶åŠŸèƒ½

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ•°æ®åº“å˜æ›´

æ— éœ€ä¿®æ”¹(gallery å’Œ gallery_image è¡¨å·²å­˜åœ¨)

---

## âœ… TDD æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•æ–‡ä»¶ 1: `tests/admin/test_gallery_crud.py`

```python
def test_create_gallery()
def test_batch_add_images()
def test_update_gallery()
def test_delete_gallery()
```
### æµ‹è¯•æ–‡ä»¶ 2: `tests/admin/test_gallery_sorting.py`

```python
def test_drag_sort()
def test_batch_update_order()
```
### æµ‹è¯•æ–‡ä»¶ 3: `tests/admin/test_gallery_metadata.py`

```python
def test_set_image_title()
def test_set_image_caption()
def test_toggle_visibility()
def test_set_cover_image()
```

**æµ‹è¯•ç»Ÿè®¡**: å…± 10 ä¸ªæµ‹è¯•ç”¨ä¾‹

---

## ğŸ“ å¼€å‘æ­¥éª¤ï¼ˆTDDï¼‰

### Phase 1: ç¼–å†™æµ‹è¯• (Red)
- åˆ›å»º 3 ä¸ªæµ‹è¯•æ–‡ä»¶
- ç¼–å†™æ‰€æœ‰ 10 ä¸ªæµ‹è¯•ç”¨ä¾‹
- è¿è¡Œæµ‹è¯•ç¡®è®¤å¤±è´¥

### Phase 2-3: å®ç°åŠŸèƒ½ (Green)
- åˆ›å»ºè·¯ç”±æ–‡ä»¶
- åˆ›å»ºæœåŠ¡å±‚
- å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

### Phase 4-5: åˆ›å»ºæ¨¡æ¿å’Œè„šæœ¬
- åˆ›å»º HTML æ¨¡æ¿
- åˆ›å»º JavaScript è„šæœ¬
- é›†æˆå‰ç«¯ç»„ä»¶

### Phase 6: æµ‹è¯•éªŒè¯ (Green)
- è¿è¡Œæ‰€æœ‰æµ‹è¯•
- ç¡®è®¤è¦†ç›–ç‡ >= 85%

### Phase 7: é‡æ„ (Refactor)
- ä»£ç æ ¼å¼åŒ–
- ç±»å‹æ£€æŸ¥
- ä¼˜åŒ–æ€§èƒ½

---

## ğŸ“„ API è·¯ç”±è®¾è®¡

- GET /admin/galleries - åˆ—è¡¨é¡µ
- GET /admin/galleries/new - æ–°å»ºé¡µ
- POST /admin/galleries - åˆ›å»º
- GET /admin/galleries/{id}/edit - ç¼–è¾‘é¡µ
- PUT /admin/galleries/{id} - æ›´æ–°
- DELETE /admin/galleries/{id} - åˆ é™¤
- POST /admin/galleries/{id}/images - æ·»åŠ å›¾ç‰‡
- DELETE /admin/galleries/{id}/images/{image_id} - åˆ é™¤å›¾ç‰‡
- POST /admin/galleries/{id}/reorder - å›¾ç‰‡æ’åº

---

## âœ… å®Œæˆæ ‡å‡†

### åŠŸèƒ½æ€§è¦æ±‚
- [ ] ç›¸å†Œ CRUDåŠŸèƒ½æ­£å¸¸
- [ ] æ‰¹é‡ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] æ‹–æ‹½æ’åºåŠŸèƒ½æ­£å¸¸
- [ ] å›¾ç‰‡å…ƒæ•°æ®åŠŸèƒ½æ­£å¸¸
- [ ] å°é¢å›¾è®¾ç½®åŠŸèƒ½æ­£å¸¸
- [ ] æ˜¾ç¤º/éšè—æ§åˆ¶åŠŸèƒ½æ­£å¸¸
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ (10/10)

### è´¨é‡è¦æ±‚
- [ ] ä»£ç ç¬¦åˆ PEP 8 è§„èŒƒ
- [ ] æ‰€æœ‰å‡½æ•°æœ‰ç±»å‹æç¤º
- [ ] æµ‹è¯•è¦†ç›–ç‡ >= 85%
- [ ] æ— ä»£ç è´¨é‡è­¦å‘Š

### ç”¨æˆ·ä½“éªŒ
- [ ] ç•Œé¢ç›´è§‚æ˜“ç”¨
- [ ] æ“ä½œæµç•…
- [ ] é”™è¯¯æç¤ºæ¸…æ™°
- [ ] å“åº”å¼è®¾è®¡è‰¯å¥½

---

## ğŸ“Š éªŒè¯å‘½ä»¤

```bash
# è¿è¡Œæµ‹è¯•
pytest tests/admin/test_gallery_crud*.py -v

# æŸ¥çœ‹è¦†ç›–ç‡
pytest tests/admin/test_gallery_crud*.py --cov=app/admin --cov-report=html

# ä»£ç è´¨é‡æ£€æŸ¥
black app/admin/ --check
mypy app/admin/
```

---

## ğŸ”„ äº¤ä»˜ç‰©

1. âœ… è·¯ç”±æ–‡ä»¶ï¼ˆå®Œæ•´ CRUD æˆ–æŸ¥è¯¢åŠŸèƒ½ï¼‰
2. âœ… æœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
3. âœ… æ¨¡æ¿æ–‡ä»¶
4. âœ… JavaScript è„šæœ¬
5. âœ… 10 ä¸ªé€šè¿‡çš„æµ‹è¯•ç”¨ä¾‹
6. âœ… æ›´æ–°çš„ TODO.md

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç›¸å†Œ CRUD**: ç¡®ä¿åŠŸèƒ½å®Œæ•´ä¸”ç”¨æˆ·å‹å¥½
2. **æ‰¹é‡ä¸Šä¼ **: ç¡®ä¿åŠŸèƒ½å®Œæ•´ä¸”ç”¨æˆ·å‹å¥½
3. **æ‹–æ‹½æ’åº**: ç¡®ä¿åŠŸèƒ½å®Œæ•´ä¸”ç”¨æˆ·å‹å¥½

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [admin-system-design.md](../../admin-system-design.md) - ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ (ç¬¬ 337-374 è¡Œ)
- [admin-development-plan.md](../../admin-development-plan.md) - æ€»ä½“å¼€å‘è®¡åˆ’
- [TODO.md](./TODO.md) - æœ¬æ¨¡å—å¾…åŠäº‹é¡¹
